<?xml version="1.0"?>

<!-- KC-137R V2500 Engine/FADEC -->
<!-- Copyright (c) 2024 Josh Davidson (Octal450) -->
<!-- Tables based off my A320 FADEC, vs 95 not 100 -->

<system name="KC-137R: V2500">
	
	<property value="23000">fadec/limit/rated-thrust</property>
	
	<channel name="Thrust Limits">
		
		<fcs_function name="fadec/limit/rated-thrust-n1">
			<function>
				<table>
					<independentVar lookup="row">/position/altitude-ft</independentVar>
					<independentVar lookup="column">propulsion/tat-c</independentVar>
					<tableData>
						      -44   -14    16    46    76
						-2000  71.8  75.9  79.8  83.7  87.5
						    0  74.1  78.3  82.4  86.3  90.2
						10000  78.6  81.6  85.5  88.1  91.4
						45000  76.1  79.2  83.5  87.4  91.0
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/milthrust-density"> <!-- Copy of MilThrust table with density effects -->
			<function>
				<table>
					<independentVar lookup="row">velocities/mach</independentVar>
					<independentVar lookup="column">atmosphere/density-altitude</independentVar>
					<tableData>
						    -10000   0       10000   20000   30000   45000   50000
						0.0  1.2600  1.0000  0.7400  0.5640  0.3920  0.2840  0.0000
						0.2  1.1710  0.9740  0.6970  0.5360  0.3850  0.2740  0.0000
						0.4  1.1500  0.9570  0.6920  0.5460  0.3870  0.2670  0.0000
						0.6  1.1810  0.9410  0.7210  0.5660  0.3580  0.2310  0.0000
						0.8  1.2290  1.0200  0.7820  0.5570  0.3040  0.2060  0.0000
						0.9  1.2580  1.0200  0.7820  0.5220  0.2710  0.1270  0.0000
						1.0  1.1810  0.9510  0.7210  0.4410  0.1740  0.0580  0.0000
						1.2  0.0000  0.0000  0.0000  0.0000  0.0000  0.0000  0.0000
						1.4  0.0000  0.0000  0.0000  0.0000  0.0000  0.0000  0.0000
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<!-- Following functions fix a FGTurbine inaccuracy... rated thrust N1% should be rated thrust lbs -->
		<!-- These calculations change it so that the rated power at sea level is at the correct N1% value. It still changes with altitude and mach as it should -->
		<fcs_function name="fadec/limit/rated-thrust-target">
			<function>
				<sum>
					<product>
						<property>propulsion/engine[0]/IdleThrust</property> <!-- It doesn't matter which engine, its same for all -->
						<property>fadec/limit/rated-thrust</property>
					</product>
					<product>
						<difference>
							<property>fadec/limit/rated-thrust</property>
							<product>
								<property>propulsion/engine[0]/IdleThrust</property> <!-- It doesn't matter which engine, its same for all -->
								<property>fadec/limit/rated-thrust</property>
							</product>
						</difference>
						<property>fadec/limit/milthrust-density</property>
					</product>
				</sum>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/rated-thrust-actual">
			<function>
				<sum>
					<product>
						<property>propulsion/engine[0]/IdleThrust</property> <!-- It doesn't matter which engine, its same for all -->
						<property>fadec/limit/rated-thrust</property>
					</product>
					<product>
						<product>
							<difference>
								<property>fadec/limit/rated-thrust</property>
								<product>
									<property>propulsion/engine[0]/IdleThrust</property> <!-- It doesn't matter which engine, its same for all -->
									<property>fadec/limit/rated-thrust</property>
								</product>
							</difference>
							<property>fadec/limit/milthrust-density</property>
						</product>
						<pow>
							<quotient>
								<difference>
									<property>fadec/limit/rated-thrust-n1</property>
									<value>22.4</value>
								</difference>
								<value>77.6</value>
							</quotient>
							<value>2</value>
						</pow>
					</product>
				</sum>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/rated-thrust-factor">
			<function>
				<ifthen>
					<nq> <!-- Prevent divide by 0 -->
						<property>fadec/limit/rated-thrust-actual</property>
						<value>0</value>
					</nq>
					<quotient>
						<property>fadec/limit/rated-thrust-target</property>
						<property>fadec/limit/rated-thrust-actual</property>
					</quotient>
					<value>1</value>
				</ifthen>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/toga">
			<function>
				<table>
					<independentVar lookup="row">/position/altitude-ft</independentVar>
					<independentVar lookup="column">propulsion/tat-c</independentVar>
					<tableData>
						      -44   -34   -24   -14   -4     6     16    26    36    46    56    66    76
						-2000  71.8  73.2  74.6  75.9  77.3  78.6  79.8  81.2  82.4  83.7  83.7  82.6  81.6
						-1000  72.9  74.4  75.7  77.1  78.5  79.8  81.2  82.5  83.7  85.0  84.3  83.1  81.9
						    0  74.1  75.5  77.0  78.3  79.8  81.1  82.4  83.7  85.0  86.3  84.9  83.6  82.3
						 1000  74.6  76.1  77.5  79.0  80.3  81.6  82.9  84.2  85.6  86.3  85.0  83.5  82.4
						 2000  75.2  76.7  78.1  79.5  80.9  82.2  83.5  84.8  86.1  86.3  84.9  83.4  82.5
						 3000  75.7  77.2  78.6  80.0  81.4  82.7  84.1  85.4  86.7  86.3  84.8  83.4  82.6
						 4000  76.3  77.7  79.2  80.6  81.9  83.2  84.5  85.8  87.1  86.3  84.6  83.5  82.6
						 5000  76.8  78.3  79.8  81.2  82.5  83.9  85.1  86.4  87.7  86.2  84.5  83.5  82.6
						 6000  77.3  78.7  80.2  81.6  82.9  84.2  85.5  86.8  87.7  86.2  84.5  83.5  82.6
						 7000  77.9  79.4  80.8  82.3  83.6  85.0  86.2  87.5  87.8  86.1  84.5  83.6  82.9
						 8000  78.4  79.9  81.4  82.9  84.2  85.6  87.0  88.3  87.6  85.9  84.5  83.6  83.6
						 9000  78.8  80.3  81.8  83.2  84.6  86.0  87.3  88.6  87.5  85.9  84.6  83.8  83.8
						10000  79.1  80.6  82.2  83.6  85.0  86.4  87.7  88.9  87.4  85.9  84.8  83.9  83.9
						11000  79.7  81.2  82.7  84.1  85.6  87.0  88.3  89.0  87.3  85.8  84.9  84.9  84.9
						12000  80.2  81.7  83.2  84.7  86.1  87.5  88.8  89.0  87.2  85.8  85.1  85.1  85.1
						13000  80.5  82.1  83.6  85.1  86.5  87.9  89.2  88.8  87.2  85.9  85.2  85.2  85.2
						14000  80.9  82.5  83.9  85.5  86.9  88.3  89.6  88.7  87.2  86.0  85.2  85.2  85.2
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/toga-norm">
			<function>
				<table>
					<independentVar lookup="row">fadec/limit/toga</independentVar>
					<tableData>
						 22.4  0
						100.0  1
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/mct">
			<function>
				<table>
					<independentVar lookup="row">/position/altitude-ft</independentVar>
					<independentVar lookup="column">propulsion/tat-c</independentVar>
					<independentVar lookup="table">velocities/mach</independentVar>
					<tableData breakPoint="0.3">
						      -65   -35   -5     25    55
						    0  68.8  72.9  76.8  80.6  78.0
						 5000  71.4  75.6  79.5  80.9  79.9
						10000  75.0  79.2  83.0  81.8  82.6
						15000  77.1  81.2  85.1  81.3  84.6
					</tableData>
					<tableData breakPoint="0.4">
						      -65   -35   -5     25    55
						    0  68.3  72.4  76.2  79.9  78.3
						 5000  70.9  75.0  78.8  81.2  79.3
						10000  74.1  78.3  82.2  82.1  81.7
						15000  77.4  81.5  84.6  82.5  84.8
						20000  78.6  83.0  85.4  82.8  84.8
					</tableData>
					<tableData breakPoint="0.5">
						      -65   -35   -5     25    55
						    0  67.8  71.8  75.6  79.2  78.6
						 5000  70.1  74.2  78.1  81.7  78.7
						10000  73.5  77.6  81.5  82.5  81.0
						15000  75.8  79.8  83.6  82.1  83.1
						20000  76.7  81.0  83.9  81.1  84.3
						25000  78.0  82.2  83.0  82.7  86.0
					</tableData>
					<tableData breakPoint="0.6">
						      -65   -35   -5     25    55
						 5000  69.2  73.2  77.1  80.7  78.9
						10000  72.2  76.3  80.1  82.5  79.6
						15000  74.4  78.5  82.3  82.2  82.5
						20000  76.0  80.3  82.8  82.1  83.4
						25000  76.3  80.5  82.5  81.0  84.2
					</tableData>
					<tableData breakPoint="0.7">
						      -65   -35   -5     25    55
						15000  72.5  76.5  80.2  81.8  79.6
						20000  74.3  78.6  81.8  82.0  81.6
						25000  74.4  78.5  82.3  81.5  82.2
						35000  77.4  81.5  80.2  81.2  83.5
						39000  77.4  81.4  79.5  81.1  83.3
						45000  78.3  81.5  79.0  80.8  82.9
					</tableData>
					<tableData breakPoint="0.8">
						      -65   -35   -5     25    55
						20000  72.5  76.7  80.5  81.0  79.7
						25000  74.1  76.8  79.9  79.2  79.8
						35000  75.1  79.2  79.9  78.7  82.0
						39000  75.0  79.1  79.1  78.6  81.9
						45000  75.9  79.9  78.7  78.3  81.5
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/climb">
			<function>
				<table>
					<independentVar lookup="row">/position/altitude-ft</independentVar>
					<independentVar lookup="column">propulsion/tat-c</independentVar>
					<independentVar lookup="table">velocities/mach</independentVar>
					<tableData breakPoint="0.4">
						      -65   -35   -5     25    55
						 5000  67.3  71.2  75.1  77.5  75.7
						 8000  69.1  73.2  76.9  78.0  77.5
						10000  70.8  74.8  78.5  78.9  78.4
						14000  73.1  77.1  81.0  79.5  79.9
					</tableData>
					<tableData breakPoint="0.6">
						      -65   -35   -5     25    55
						 5000  65.7  69.6  73.3  76.8  75.4
						10000  68.4  72.4  75.9  78.6  76.7
						14000  70.0  74.0  77.9  78.6  78.2
						20000  73.4  77.4  81.2  79.3  80.4
						25000  75.4  79.5  81.4  79.9  81.7
					</tableData>
					<tableData breakPoint="0.8">
						      -65   -35   -5     25    55
						20000  69.8  73.8  77.5  78.4  77.6
						25000  71.1  75.2  78.9  77.5  78.6
						35000  74.1  78.2  78.9  77.7  79.5
						39000  74.0  78.1  78.1  77.6  79.5
						45000  74.9  78.9  77.3  77.2  79.2
					</tableData>
					<tableData breakPoint="0.85">
						      -65   -35   -5     25    55
						25000  70.4  74.4  78.2  77.5  77.9
						35000  72.9  77.6  78.7  76.4  77.8
						39000  72.7  77.5  77.9  76.3  77.7
						45000  73.8  77.8  77.7  75.9  77.6
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/climb-norm">
			<function>
				<table>
					<independentVar lookup="row">fadec/limit/climb</independentVar>
					<tableData>
						 22.4  0
						100.0  1
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/climb-norm-deadzone">
			<function>
				<sum>
					<property>fadec/limit/climb-norm</property>
					<value>0.02</value>
				</sum>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/idle-ref">
			<function>
				<ifthen>
					<eq>
						<property>position/wow</property>
						<value>0</value>
					</eq>
					<table>
						<independentVar lookup="row">velocities/mach</independentVar>
						<independentVar lookup="column">/controls/flight/flaps</independentVar>
						<independentVar lookup="table">/position/altitude-ft</independentVar>
						<tableData breakPoint="0">
							      0.05  0.15
							0.21  27.9  33.6
							0.70  35.3  39.7
						</tableData>
						<tableData breakPoint="45000">
							      0.05  0.15
							0.55  44.2  50.0
							0.90  49.7  51.8
						</tableData>
					</table>
					<value>0</value>
				</ifthen>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/idle">
			<function>
				<quotient>
					<integer>
						<sum>
							<product>
								<property>fadec/limit/idle-ref</property>
								<value>10</value>
							</product>
							<value>0.5</value> <!-- Make it round correctly -->
						</sum>
					</integer>
					<value>10</value>
				</quotient>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/idle-norm">
			<function>
				<table>
					<independentVar lookup="row">fadec/limit/idle</independentVar>
					<tableData>
						 22.4  0
						100.0  1
					</tableData>
				</table>
			</function>
			<output>/it-autoflight/settings/autothrottle-min</output>
		</fcs_function>
		
		<fcs_function name="fadec/limit/mrev">
			<function>
				<table>
					<independentVar lookup="row">/position/altitude-ft</independentVar>
					<independentVar lookup="column">propulsion/tat-c</independentVar>
					<tableData>
						      -65   -35   -5     25    55
						    0  62.1  65.5  68.9  72.2  71.0
						10000  69.5  72.8  75.9  78.3  77.8
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/mrev-norm">
			<function>
				<table>
					<independentVar lookup="row">fadec/limit/mrev</independentVar>
					<tableData>
						 22.4  0
						100.0  1
					</tableData>
				</table>
			</function>
		</fcs_function>
		
		<switch name="fadec/limit/climb-latch">
			<default value="fadec/limit/climb-latch"/>
			<test value="0">
				/it-autoflight/output/vert eq 8
			</test>
			<test value="1">
				/it-autoflight/output/vert ne 7
			</test>
			<test logic="AND" value="0">
				/it-autoflight/output/vert eq 7
				position/wow eq 1
			</test>
			<test logic="AND" value="1">
				/it-autoflight/output/vert eq 7
				/position/gear-agl-ft ge 1500
			</test>
		</switch>
		
		<switch name="fadec/limit/active-int">
			<default value="0"/> <!-- Takeoff/Go Around -->
			<test logic="AND" value="2"> <!-- Climb -->
				fadec/limit/climb-latch eq 1
				/engines/engine[0]/running eq 1
				/engines/engine[1]/running eq 1
				/engines/engine[2]/running eq 1
				/engines/engine[3]/running eq 1
			</test>
			<test value="1"> <!-- Max Continuous -->
				fadec/limit/climb-latch eq 1
			</test>
		</switch>
		
		<switch name="fadec/limit/active">
			<default value="fadec/limit/toga"/>
			<test value="fadec/limit/mct">
				fadec/limit/active-int eq 1
			</test>
			<test value="fadec/limit/climb">
				fadec/limit/active-int eq 2
			</test>
		</switch>
		
		<fcs_function name="fadec/limit/active-norm">
			<function>
				<table>
					<independentVar lookup="row">fadec/limit/active</independentVar>
					<tableData>
						 22.4  0
						100.0  1
					</tableData>
				</table>
			</function>
			<output>/it-autoflight/settings/autothrottle-max</output>
		</fcs_function>
		
		<fcs_function name="fadec/limit/active-tpr-ref">
			<function>
				<pow>
					<property>fadec/limit/active</property>
					<value>3.5</value>
				</pow>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/limit/active-tpr">
			<function>
				<product>
					<table>
						<independentVar lookup="row">fadec/limit/active-tpr-ref</independentVar>
						<tableData>
							   53194.6    2.7
							10000000.0  100.0
						</tableData>
					</table>
					<property>fadec/limit/rated-thrust-factor</property>
				</product>
			</function>
		</fcs_function>
	
	</channel>
	
	<channel name="Engine Control">
		
		<!-- Engine 1 -->
		<switch name="fadec/control-1/throttle-pos">
			<default value="/controls/engines/engine[0]/throttle"/>
			<test value="0">
				/engines/engine[0]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-1/throttle-lag">
			<input>fadec/control-1/throttle-pos</input>
			<c1>20</c1>
		</lag_filter>
		
		<switch name="fadec/control-1/throttle-cmd">
			<default value="fadec/control-1/throttle-pos"/>
			<clipto>
				<min>fadec/limit/idle-norm</min>
				<max>fadec/limit/toga-norm</max>
			</clipto>
		</switch>
		
		<switch name="fadec/control-1/throttle-pos-rev">
			<default value="0"/>
			<test value="/controls/engines/engine[0]/throttle">
				/engines/engine[0]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-1/throttle-lag-rev">
			<input>fadec/control-1/throttle-pos-rev</input>
			<c1>20</c1>
		</lag_filter>
		
		<pure_gain name="fadec/control-1/throttle-cmd-rev">
			<input>fadec/control-1/throttle-pos-rev</input>
			<gain>fadec/limit/mrev-norm</gain>
			<clipto>
				<min>0.08</min>
				<max>fadec/limit/mrev-norm</max>
			</clipto>
		</pure_gain>
		
		<switch name="fadec/control-1/throttle-output">
			<default value="fadec/control-1/throttle-cmd"/>
			<test value="fadec/control-1/throttle-cmd-rev">
				/engines/engine[0]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-1/throttle-fdm">
			<input>fadec/control-1/throttle-output</input>
			<c1>0.75</c1>
			<output>fcs/throttle-pos-norm[0]</output>
		</lag_filter>
		
		<!-- Engine 2 -->
		<switch name="fadec/control-2/throttle-pos">
			<default value="/controls/engines/engine[1]/throttle"/>
			<test value="0">
				/engines/engine[1]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-2/throttle-lag">
			<input>fadec/control-2/throttle-pos</input>
			<c1>20</c1>
		</lag_filter>
		
		<switch name="fadec/control-2/throttle-cmd">
			<default value="fadec/control-2/throttle-pos"/>
			<clipto>
				<min>fadec/limit/idle-norm</min>
				<max>fadec/limit/toga-norm</max>
			</clipto>
		</switch>
		
		<switch name="fadec/control-2/throttle-pos-rev">
			<default value="0"/>
			<test value="/controls/engines/engine[1]/throttle">
				/engines/engine[1]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-2/throttle-lag-rev">
			<input>fadec/control-2/throttle-pos-rev</input>
			<c1>20</c1>
		</lag_filter>
		
		<pure_gain name="fadec/control-2/throttle-cmd-rev">
			<input>fadec/control-2/throttle-pos-rev</input>
			<gain>fadec/limit/mrev-norm</gain>
			<clipto>
				<min>0.08</min>
				<max>fadec/limit/mrev-norm</max>
			</clipto>
		</pure_gain>
		
		<switch name="fadec/control-2/throttle-output">
			<default value="fadec/control-2/throttle-cmd"/>
			<test value="fadec/control-2/throttle-cmd-rev">
				/engines/engine[1]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-2/throttle-fdm">
			<input>fadec/control-2/throttle-output</input>
			<c1>0.75</c1>
			<output>fcs/throttle-pos-norm[1]</output>
		</lag_filter>
		
		<!-- Engine 3 -->
		<switch name="fadec/control-3/throttle-pos">
			<default value="/controls/engines/engine[2]/throttle"/>
			<test value="0">
				/engines/engine[2]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-3/throttle-lag">
			<input>fadec/control-3/throttle-pos</input>
			<c1>20</c1>
		</lag_filter>
		
		<switch name="fadec/control-3/throttle-cmd">
			<default value="fadec/control-3/throttle-pos"/>
			<clipto>
				<min>fadec/limit/idle-norm</min>
				<max>fadec/limit/toga-norm</max>
			</clipto>
		</switch>
		
		<switch name="fadec/control-3/throttle-pos-rev">
			<default value="0"/>
			<test value="/controls/engines/engine[2]/throttle">
				/engines/engine[2]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-3/throttle-lag-rev">
			<input>fadec/control-3/throttle-pos-rev</input>
			<c1>20</c1>
		</lag_filter>
		
		<pure_gain name="fadec/control-3/throttle-cmd-rev">
			<input>fadec/control-3/throttle-pos-rev</input>
			<gain>fadec/limit/mrev-norm</gain>
			<clipto>
				<min>0.08</min>
				<max>fadec/limit/mrev-norm</max>
			</clipto>
		</pure_gain>
		
		<switch name="fadec/control-3/throttle-output">
			<default value="fadec/control-3/throttle-cmd"/>
			<test value="fadec/control-3/throttle-cmd-rev">
				/engines/engine[2]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-3/throttle-fdm">
			<input>fadec/control-3/throttle-output</input>
			<c1>0.75</c1>
			<output>fcs/throttle-pos-norm[2]</output>
		</lag_filter>
		
		<!-- Engine 4 -->
		<switch name="fadec/control-4/throttle-pos">
			<default value="/controls/engines/engine[3]/throttle"/>
			<test value="0">
				/engines/engine[3]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-4/throttle-lag">
			<input>fadec/control-4/throttle-pos</input>
			<c1>20</c1>
		</lag_filter>
		
		<switch name="fadec/control-4/throttle-cmd">
			<default value="fadec/control-4/throttle-pos"/>
			<clipto>
				<min>fadec/limit/idle-norm</min>
				<max>fadec/limit/toga-norm</max>
			</clipto>
		</switch>
		
		<switch name="fadec/control-4/throttle-pos-rev">
			<default value="0"/>
			<test value="/controls/engines/engine[3]/throttle">
				/engines/engine[3]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-4/throttle-lag-rev">
			<input>fadec/control-4/throttle-pos-rev</input>
			<c1>20</c1>
		</lag_filter>
		
		<pure_gain name="fadec/control-4/throttle-cmd-rev">
			<input>fadec/control-4/throttle-pos-rev</input>
			<gain>fadec/limit/mrev-norm</gain>
			<clipto>
				<min>0.08</min>
				<max>fadec/limit/mrev-norm</max>
			</clipto>
		</pure_gain>
		
		<switch name="fadec/control-4/throttle-output">
			<default value="fadec/control-4/throttle-cmd"/>
			<test value="fadec/control-4/throttle-cmd-rev">
				/engines/engine[3]/reverser-pos-norm ne 0
			</test>
		</switch>
		
		<lag_filter name="fadec/control-4/throttle-fdm">
			<input>fadec/control-4/throttle-output</input>
			<c1>0.75</c1>
			<output>fcs/throttle-pos-norm[3]</output>
		</lag_filter>
	
	</channel>
	
	<channel name="Engine Parameters">
		
		<lag_filter name="fadec/n1-actual-1">
			<input>/engines/engine[0]/n1</input>
			<c1>2.25</c1>
			<output>/engines/engine[0]/n1-actual</output>
			<output>/engines/engine[4]/n1</output>
		</lag_filter>
		
		<lag_filter name="fadec/n1-actual-2">
			<input>/engines/engine[1]/n1</input>
			<c1>2.25</c1>
			<output>/engines/engine[1]/n1-actual</output>
			<output>/engines/engine[5]/n1</output>
		</lag_filter>
		
		<lag_filter name="fadec/n1-actual-3">
			<input>/engines/engine[2]/n1</input>
			<c1>2.25</c1>
			<output>/engines/engine[2]/n1-actual</output>
			<output>/engines/engine[6]/n1</output>
		</lag_filter>
		
		<lag_filter name="fadec/n1-actual-4">
			<input>/engines/engine[3]/n1</input>
			<c1>2.25</c1>
			<output>/engines/engine[3]/n1-actual</output>
			<output>/engines/engine[7]/n1</output>
		</lag_filter>
		
		<fcs_function name="fadec/tpr-actual-1-ref">
			<function>
				<pow>
					<property>fadec/n1-actual-1</property>
					<value>3.5</value>
				</pow>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-1-calc">
			<function>
				<product>
					<table>
						<independentVar lookup="row">fadec/tpr-actual-1-ref</independentVar>
						<tableData>
							   53194.6    2.7
							10000000.0  100.0
						</tableData>
					</table>
					<property>fadec/limit/rated-thrust-factor</property>
				</product>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-1">
			<function>
				<interpolate1d>
					<property>fadec/n1-actual-1</property>
					<value>6</value><value>0</value>
					<value>22.4</value><property>fadec/tpr-actual-1-calc</property>
				</interpolate1d>
			</function>
			<output>/engines/engine[0]/tpr-actual</output>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-2-ref">
			<function>
				<pow>
					<property>fadec/n1-actual-2</property>
					<value>3.5</value>
				</pow>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-2-calc">
			<function>
				<product>
					<table>
						<independentVar lookup="row">fadec/tpr-actual-2-ref</independentVar>
						<tableData>
							   53194.6    2.7
							10000000.0  100.0
						</tableData>
					</table>
					<property>fadec/limit/rated-thrust-factor</property>
				</product>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-2">
			<function>
				<interpolate1d>
					<property>fadec/n1-actual-2</property>
					<value>6</value><value>0</value>
					<value>22.4</value><property>fadec/tpr-actual-2-calc</property>
				</interpolate1d>
			</function>
			<output>/engines/engine[1]/tpr-actual</output>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-3-ref">
			<function>
				<pow>
					<property>fadec/n1-actual-3</property>
					<value>3.5</value>
				</pow>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-3-calc">
			<function>
				<product>
					<table>
						<independentVar lookup="row">fadec/tpr-actual-3-ref</independentVar>
						<tableData>
							   53194.6    2.7
							10000000.0  100.0
						</tableData>
					</table>
					<property>fadec/limit/rated-thrust-factor</property>
				</product>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-3">
			<function>
				<interpolate1d>
					<property>fadec/n1-actual-3</property>
					<value>6</value><value>0</value>
					<value>22.4</value><property>fadec/tpr-actual-3-calc</property>
				</interpolate1d>
			</function>
			<output>/engines/engine[2]/tpr-actual</output>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-4-ref">
			<function>
				<pow>
					<property>fadec/n1-actual-4</property>
					<value>3.5</value>
				</pow>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-4-calc">
			<function>
				<product>
					<table>
						<independentVar lookup="row">fadec/tpr-actual-4-ref</independentVar>
						<tableData>
							   53194.6    2.7
							10000000.0  100.0
						</tableData>
					</table>
					<property>fadec/limit/rated-thrust-factor</property>
				</product>
			</function>
		</fcs_function>
		
		<fcs_function name="fadec/tpr-actual-4">
			<function>
				<interpolate1d>
					<property>fadec/n1-actual-4</property>
					<value>6</value><value>0</value>
					<value>22.4</value><property>fadec/tpr-actual-4-calc</property>
				</interpolate1d>
			</function>
			<output>/engines/engine[3]/tpr-actual</output>
		</fcs_function>
		
		<lag_filter name="fadec/n2-actual-1">
			<input>/engines/engine[0]/n2</input>
			<c1>2.25</c1>
			<output>/engines/engine[0]/n2-actual</output>
			<output>/engines/engine[4]/n2</output>
		</lag_filter>
		
		<lag_filter name="fadec/n2-actual-2">
			<input>/engines/engine[1]/n2</input>
			<c1>2.25</c1>
			<output>/engines/engine[1]/n2-actual</output>
			<output>/engines/engine[5]/n2</output>
		</lag_filter>
		
		<lag_filter name="fadec/n2-actual-3">
			<input>/engines/engine[2]/n2</input>
			<c1>2.25</c1>
			<output>/engines/engine[2]/n2-actual</output>
			<output>/engines/engine[6]/n2</output>
		</lag_filter>
		
		<lag_filter name="fadec/n2-actual-4">
			<input>/engines/engine[3]/n2</input>
			<c1>2.25</c1>
			<output>/engines/engine[3]/n2-actual</output>
			<output>/engines/engine[7]/n2</output>
		</lag_filter>
		
		<lag_filter name="fadec/ff-actual-1">
			<input>/engines/engine[0]/fuel-flow_pph</input>
			<c1>3.0</c1>
			<output>/engines/engine[0]/ff-actual</output>
		</lag_filter>
		
		<lag_filter name="fadec/ff-actual-2">
			<input>/engines/engine[1]/fuel-flow_pph</input>
			<c1>3.0</c1>
			<output>/engines/engine[1]/ff-actual</output>
		</lag_filter>
		
		<lag_filter name="fadec/ff-actual-3">
			<input>/engines/engine[2]/fuel-flow_pph</input>
			<c1>3.0</c1>
			<output>/engines/engine[2]/ff-actual</output>
		</lag_filter>
		
		<lag_filter name="fadec/ff-actual-4">
			<input>/engines/engine[3]/fuel-flow_pph</input>
			<c1>3.0</c1>
			<output>/engines/engine[3]/ff-actual</output>
		</lag_filter>
	
	</channel>

</system>
